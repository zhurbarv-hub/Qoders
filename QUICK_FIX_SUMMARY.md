# üöÄ –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ HTTP 422

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–û–±–Ω–æ–≤–ª—ë–Ω `.env` —Ñ–∞–π–ª:**
   ```env
   BOT_API_USERNAME=admin@kkt.ru  # –±—ã–ª–æ: admin
   BOT_API_PASSWORD=admin123      # –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   ```

2. **–ü—Ä–æ–≤–µ—Ä–µ–Ω –ø–∞—Ä–æ–ª—å –≤ –ë–î:** –ü–∞—Ä–æ–ª—å `admin123` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω ‚úÖ

3. **–°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
   - `check_admin_users.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `fix_bot_password_direct.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   - `test_bot_login.py` - —Ç–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ Web API
```bash
cd d:\QoProj\KKT
python -m uvicorn web.app.main:app --host 0.0.0.0 --port 8000 --reload
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
cd d:\QoProj\KKT
python test_bot_login.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –£–°–ü–ï–®–ù–ê!
üéüÔ∏è  –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
```bash
cd d:\QoProj\KKT
python -m bot.main
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```
‚úÖ –¢–æ–∫–µ–Ω —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω. –ò—Å—Ç–µ–∫–∞–µ—Ç –≤ HH:MM:SS
üíæ –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: API mode
```

---

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|----------|------|-------|
| BOT_API_USERNAME | `admin` | `admin@kkt.ru` |
| BOT_API_PASSWORD | `admin123` | `admin123` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) |
| –ü–∞—Ä–æ–ª—å –≤ –ë–î | –ü—Ä–æ–≤–µ—Ä–µ–Ω ‚úÖ | `admin123` |

---

## üîç –ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏

- Web API —Ç—Ä–µ–±—É–µ—Ç **–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤** –¥–ª—è –ø–∞—Ä–æ–ª—è
- –í `.env` –±—ã–ª —É–∫–∞–∑–∞–Ω `BOT_API_USERNAME=admin`, –Ω–æ –≤ –ë–î –Ω–µ—Ç –ø–æ–ª—è `username`
- –ù—É–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **email** –≤–º–µ—Å—Ç–æ username

---

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **API –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–≤–æ–±–æ–¥–µ–Ω –ª–∏ –ø–æ—Ä—Ç 8000: `netstat -ano | findstr :8000`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ë–î —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `dir database\kkt_services.db`

2. **–û—à–∏–±–∫–∞ 422 –≤—Å—ë –µ—â—ë –ø–æ—è–≤–ª—è–µ—Ç—Å—è:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env`: `type .env | findstr BOT_API`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª—å ‚â•6 —Å–∏–º–≤–æ–ª–æ–≤

3. **–û—à–∏–±–∫–∞ 401 (–Ω–µ–≤–µ—Ä–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ):**
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python fix_bot_password_direct.py`
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø–∞—Ä–æ–ª—å `admin123` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `admin@kkt.ru`

---

## üìÑ –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç
–°–º–æ—Ç—Ä–∏—Ç–µ `BOT_PASSWORD_FIX_REPORT.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
