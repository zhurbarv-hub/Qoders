# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ ID, –Ω–æ –∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏ –∏–ª–∏ –¥–∞–∂–µ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç —É–¥–æ–±—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤.

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### 1. `/filter` - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–µ–¥–ª–∞–π–Ω–æ–≤
**–§–∞–π–ª**: `bot/handlers/admin.py`

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Ç–æ—á–Ω–æ–º—É ID –∫–ª–∏–µ–Ω—Ç–∞ (—Å—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª–Ω–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é –Ω–∞–∑–≤–∞–Ω–∏—è (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π)

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/filter all                  # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–µ–¥–ª–∞–π–Ω—ã
/filter 3                    # –§–∏–ª—å—Ç—Ä –ø–æ ID –∫–ª–∏–µ–Ω—Ç–∞
/filter –û–û–û –†–æ–º–∞—à–∫–∞          # –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª–Ω–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é
/filter –†–æ–º–∞—à                # –§–∏–ª—å—Ç—Ä –ø–æ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è
/filter –ü–µ—Ç—Ä–æ–≤               # –ß–∞—Å—Ç–∏—á–Ω—ã–π –ø–æ–∏—Å–∫
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã**:
1. –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω —á–∏—Å–ª–æ–≤–æ–π ID - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ ID
2. –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ:
   - –ù–∞–π–¥–µ–Ω 1 –∫–ª–∏–µ–Ω—Ç ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
   - –ù–∞–π–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Üí –ø–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞
   - –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

---

### 2. `/client` - –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
**–§–∞–π–ª**: `bot/handlers/admin.py`

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Ç–æ—á–Ω–æ–º—É ID –∫–ª–∏–µ–Ω—Ç–∞ (—Å—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª–Ω–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é –Ω–∞–∑–≤–∞–Ω–∏—è (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π)

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/client 3                    # –ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ ID
/client –û–û–û –†–æ–º–∞—à–∫–∞          # –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª–Ω–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é
/client –†–æ–º–∞—à                # –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è
/client –ò–ü                   # –ù–∞–π—Ç–∏ –≤—Å–µ—Ö –ò–ü
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã**:
1. –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω —á–∏—Å–ª–æ–≤–æ–π ID - –ø–æ–∫–∞–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞
2. –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ:
   - –ù–∞–π–¥–µ–Ω 1 –∫–ª–∏–µ–Ω—Ç ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∫–∞–∑ –∫–∞—Ä—Ç–æ—á–∫–∏
   - –ù–∞–π–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Üí –ø–æ–∫–∞–∑ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ `/client <id>`
   - –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

---

### 3. `/search` - –ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
**–§–∞–π–ª**: `bot/handlers/search.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Web API (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–æ–¥—Ö–æ–¥)
- ‚úÖ –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SQLAlchemy
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏ (–ø–æ–ª–Ω–æ–µ –∏ —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –ò–ù–ù (–ø–æ–ª–Ω–æ–µ –∏ —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫
- ‚úÖ –ü–æ–∫–∞–∑ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª–∏–µ–Ω—Ç–µ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–µ–¥–ª–∞–π–Ω–∞–º–∏

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/search 1234567890           # –ü–æ–∏—Å–∫ –ø–æ –ò–ù–ù
/search –û–û–û –†–æ–º–∞—à–∫–∞          # –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª–Ω–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é
/search –†–æ–º–∞—à                # –ß–∞—Å—Ç–∏—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
/search 123                  # –ß–∞—Å—Ç–∏—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –ò–ù–ù
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã**:
1. –ü–æ–∏—Å–∫ –≤ –ë–î –ø–æ `company_name` –∏ `inn` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `ILIKE` (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π)
2. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ > 10 –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Üí –ø–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ –ø–µ—Ä–≤—ã—Ö 20 —Å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
3. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ ‚â§ 10 –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Üí –ø–æ–∫–∞–∑ –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏
4. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞:
   - –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–Ω–∞–∑–≤–∞–Ω–∏–µ, –ò–ù–ù, –∫–æ–Ω—Ç–∞–∫—Ç—ã, —Å—Ç–∞—Ç—É—Å)
   - –ê–∫—Ç–∏–≤–Ω—ã–µ –¥–µ–¥–ª–∞–π–Ω—ã —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π (üî¥üü°üü¢)
   - –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
**–§–∞–π–ª**: `bot/handlers/admin.py`

```python
def find_client_by_name(db_session: Session, search_query: str):
    """
    –ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏ –∏–ª–∏ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è
    """
    search_pattern = f"%{search_query}%"
    
    clients = db_session.query(User).filter(
        User.role == 'client',
        User.is_active == True,
        User.company_name.ilike(search_pattern)
    ).all()
    
    return clients
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- `ilike()` - —Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ SQLite, PostgreSQL, MySQL)
- `%search_query%` - –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è
- –§–∏–ª—å—Ç—Ä –ø–æ `role='client'` –∏ `is_active=True` - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã

### –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –ò–ù–ù
**–§–∞–π–ª**: `bot/handlers/search.py`

```python
def find_client_by_name_or_inn(db_session: Session, search_query: str):
    """
    –ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏, —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –∏–ª–∏ –ò–ù–ù
    """
    search_pattern = f"%{search_query}%"
    
    clients = db_session.query(User).filter(
        User.role == 'client',
        User.is_active == True,
        (User.company_name.ilike(search_pattern)) | (User.inn.ilike(search_pattern))
    ).all()
    
    return clients
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü–æ–∏—Å–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ –¥–≤—É–º –ø–æ–ª—è–º: `company_name` –∏ `inn`
- –õ–æ–≥–∏—á–µ—Å–∫–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä `|` (–ò–õ–ò) –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –∏–∑ –ø–æ–ª–µ–π

---

## –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö
–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `split(maxsplit=1)` –≤–º–µ—Å—Ç–æ `split()`:

```python
args = message.text.split(maxsplit=1)
search_param = args[1].strip()
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π —Å –ø—Ä–æ–±–µ–ª–∞–º–∏: "–û–û–û –†–æ–º–∞—à–∫–∞ –∏ –ö–æ–º–ø–∞–Ω–∏—è"
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ –∑–∞–ø—Ä–æ—Å–∞

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥ `/filter` –∏ `/client`

```python
try:
    user_id = int(search_param)
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∫ ID
except ValueError:
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ
    found_clients = find_client_by_name(db_session, search_param)
    
    if len(found_clients) == 1:
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
        client = found_clients[0]
        user_id = client.id
    else:
        # –ü–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞
        return
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã `/search`

```python
found_clients = find_client_by_name_or_inn(db_session, search_query)

if len(found_clients) > 10:
    # –ü–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ —Å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ (–ø–µ—Ä–≤—ã–µ 20)
    clients_list = "\n".join([
        f"‚Ä¢ /client {c.id} - {c.company_name} (–ò–ù–ù: {c.inn or '–Ω–µ —É–∫–∞–∑–∞–Ω'})"
        for c in found_clients[:20]
    ])
else:
    # –ü–æ–∫–∞–∑ –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ (–¥–æ 10 –∫–ª–∏–µ–Ω—Ç–æ–≤)
    for client in found_clients[:10]:
        # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏
```

---

## –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –¥–µ–¥–ª–∞–π–Ω–æ–≤

–í –∫–æ–º–∞–Ω–¥–µ `/search` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ü–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏:

```python
days = (d.deadline_date - date.today()).days

if days < 0:
    emoji = "‚ö´"  # –ü—Ä–æ—Å—Ä–æ—á–µ–Ω
elif days <= 3:
    emoji = "üî¥"  # –ö—Ä–∏—Ç–∏—á–Ω–æ (1-3 –¥–Ω—è)
elif days <= 7:
    emoji = "üü°"  # –í–Ω–∏–º–∞–Ω–∏–µ (4-7 –¥–Ω–µ–π)
else:
    emoji = "üü¢"  # –ù–æ—Ä–º–∞–ª—å–Ω–æ (>7 –¥–Ω–µ–π)
```

---

## –ü—Ä–∏–º–µ—Ä—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
```
–ê–¥–º–∏–Ω: /filter –û–û–û –†–æ–º–∞—à–∫–∞
–ë–æ—Ç: 
    üìã –î–µ–¥–ª–∞–π–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞: –û–û–û –†–æ–º–∞—à–∫–∞
    
    üî¥ –û—Ç—á—ë—Ç –§–ù–°: 15.12.2025 (—á–µ—Ä–µ–∑ 2 –¥–Ω.)
    üü° –£–ø–ª–∞—Ç–∞ –Ω–∞–ª–æ–≥–∞: 20.12.2025 (—á–µ—Ä–µ–∑ 7 –¥–Ω.)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ß–∞—Å—Ç–∏—á–Ω—ã–π –ø–æ–∏—Å–∫ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
```
–ê–¥–º–∏–Ω: /client –†–æ–º–∞—à
–ë–æ—Ç:
    üîç –ù–∞–π–¥–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç–æ–≤: 2
    
    ‚Ä¢ /client 3 - –û–û–û –†–æ–º–∞—à–∫–∞ (–ò–ù–ù: 1234567890)
    ‚Ä¢ /client 5 - –ò–ü –†–æ–º–∞—à–∫–∏–Ω (–ò–ù–ù: 9876543210)
    
    üí° –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ß–∞—Å—Ç–∏—á–Ω—ã–π –ø–æ–∏—Å–∫ (–æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
```
–ê–¥–º–∏–Ω: /filter –ü–µ—Ç—Ä–æ–≤–∏—á
–ë–æ—Ç:
    üìã –î–µ–¥–ª–∞–π–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞: –ò–ü –ü–µ—Ç—Ä–æ–≤–∏—á
    
    [–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ–¥–ª–∞–π–Ω—ã]
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü–æ–∏—Å–∫ –ø–æ –ò–ù–ù
```
–ê–¥–º–∏–Ω: /search 123456
–ë–æ—Ç:
    üîç –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞
    
    üìã –ö–ª–∏–µ–Ω—Ç:
    ‚Ä¢ ID: 3
    ‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ: –û–û–û –†–æ–º–∞—à–∫–∞
    ‚Ä¢ –ò–ù–ù: 1234567890
    ‚Ä¢ Email: romashka@example.com
    ...
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å ID –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –ø–æ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π —Å –ø—Ä–æ–±–µ–ª–∞–º–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ë–î (–±–µ–∑ –ª–∏—à–Ω–∏—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤)
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–≤–µ—Ç–∞

### –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (—Å—Ç–∞—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å ID —Ä–∞–±–æ—Ç–∞—é—Ç)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, 1 —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –º–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏)
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–ø–æ–∫–∞–∑ –ø–µ—Ä–≤—ã—Ö N —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Ç–æ—á–Ω–µ–Ω–∏—é –∑–∞–ø—Ä–æ—Å–∞

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
–í –ë–î —Å–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã:
- ID 3: –ò–ü –ü–µ—Ç—Ä–æ–≤–∏—á (–ò–ù–ù: 1234567890)
- ID 4: –û–û–û –†–æ–º–∞—à–∫–∞ (–ò–ù–ù: –Ω–µ —É–∫–∞–∑–∞–Ω)
- ID 5: –ò–ü –†–æ–º–∞—à–∫–∏–Ω (–ò–ù–ù: 9876543210)

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –¢–µ—Å—Ç 1: –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª–Ω–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é
```bash
/filter –ò–ü –ü–µ—Ç—Ä–æ–≤–∏—á
# –û–∂–∏–¥–∞–µ—Ç—Å—è: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–µ–¥–ª–∞–π–Ω–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞ —Å ID 3
```

#### –¢–µ—Å—Ç 2: –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è (1 —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
```bash
/client –ü–µ—Ç—Ä–æ–≤–∏—á
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –∫–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ —Å ID 3
```

#### –¢–µ—Å—Ç 3: –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
```bash
/search –†–æ–º–∞—à
# –û–∂–∏–¥–∞–µ—Ç—Å—è: —Å–ø–∏—Å–æ–∫ –∏–∑ 2 –∫–ª–∏–µ–Ω—Ç–æ–≤ (ID 4 –∏ 5)
```

#### –¢–µ—Å—Ç 4: –ü–æ–∏—Å–∫ –ø–æ –ò–ù–ù
```bash
/search 123456
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –∫–ª–∏–µ–Ω—Ç —Å ID 3 (–ò–ü –ü–µ—Ç—Ä–æ–≤–∏—á)
```

#### –¢–µ—Å—Ç 5: –ü–æ–∏—Å–∫ –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```bash
/filter –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–º–ø–∞–Ω–∏—è
# –û–∂–∏–¥–∞–µ—Ç—Å—è: —Å–æ–æ–±—â–µ–Ω–∏–µ "–ö–ª–∏–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω"
```

#### –¢–µ—Å—Ç 6: –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–ø–æ–∏—Å–∫ –ø–æ ID)
```bash
/client 3
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –∫–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ —Å ID 3 (—Å—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
```

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–†–µ–≥–∏—Å—Ç—Ä —Å–∏–º–≤–æ–ª–æ–≤**: SQLite `ILIKE` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ, –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ `LIKE`
2. **–°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã**: –°–∏–º–≤–æ–ª—ã `%` –∏ `_` –≤ –∑–∞–ø—Ä–æ—Å–µ –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∫–∞)
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ (>1000) —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –ø–æ–ª—è `company_name` –∏ `inn`
4. **–Ø–∑—ã–∫–æ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ü–æ–∏—Å–∫ –ø–æ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è ("Romashka" –Ω–µ –Ω–∞–π–¥—ë—Ç "–†–æ–º–∞—à–∫–∞")

---

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–ü–æ–∏—Å–∫ —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è fuzzy search –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—á–∞—Ç–æ–∫
2. **–ü–æ–∏—Å–∫ –ø–æ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏**: "Romashka" ‚Üí "–†–æ–º–∞—à–∫–∞"
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞**: –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º
4. **–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ**: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –≤–≤–æ–¥–µ –Ω–∞–∑–≤–∞–Ω–∏—è
5. **–§–∏–ª—å—Ç—Ä—ã**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å—Ç–∞—Ç—É—Å, –≥–æ—Ä–æ–¥, —Ä–µ–≥–∏–æ–Ω)
6. **–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**: –í—ã–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ Excel

---

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
1. `bot/handlers/admin.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `find_client_by_name()` –∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã `/filter` –∏ `/client`
2. `bot/handlers/search.py` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã `/search` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ë–î –≤–º–µ—Å—Ç–æ API

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
1. `SEARCH_BY_NAME_IMPLEMENTATION.md` - –¥–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç user experience –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤. –¢–µ–ø–µ—Ä—å –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å ID –∫–ª–∏–µ–Ω—Ç–æ–≤ - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏–ª–∏ –µ–≥–æ —á–∞—Å—Ç—å, –∏ –±–æ—Ç –Ω–∞–π–¥—ë—Ç –Ω—É–∂–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã - —Å—Ç–∞—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å ID –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ. –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ä–≥–∞–Ω–∏—á–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –±–æ—Ç–∞.

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 13 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è**: 2.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
